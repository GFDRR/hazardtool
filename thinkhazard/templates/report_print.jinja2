{% from 'report_hazard_category.jinja2' import report_for_hazard %}

{% macro hazard_type(hazard) %}
<li class="{{ hazard.hazardlevel.mnemonic }} text-center">
  <i class="fa hazard-icon icon-{{hazard.hazardtype.mnemonic|lower|replace(' ', '')}}"></i><br>
  {{ hazard.hazardtype.title }}
</li>
{% endmacro %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600' rel='stylesheet' type='text/css'>
    <link href="{{'thinkhazard:static/build/common.min.css'|static_url}}" rel="stylesheet">
    <link href="{{'thinkhazard:static/build/report.min.css'|static_url}}" rel="stylesheet">
  </head>
  <body>
    <div class="container-fluid text-center">
      <h2>
        {{ division.name }}
        <br>
        <small>
        {% for parent in parents | reverse %}
          {{ parent.name }}
          {% if not loop.last %},&nbsp;{% endif %}
        {% endfor %}
        </small>
      </h2>
      <div class="container-fluid text-center">

        <!-- Division name -->

        <ul class="hazard-types-list horizontal">
          {% for hazard in hazards_sorted %}
            {{ hazard_type(hazard) }}
          {% endfor %}
        </ul>
      </div>
    </div>
    <div class="container-fluid page-break">
      {% include 'about_body.jinja2' %}
    </div>
    {% for hazard in hazard_categories %}
    <div class="container-fluid page-break">
      {{ report_for_hazard(
           division,
           hazard.hazard_category,
           hazard.recommendations,
           hazard.climate_change_recommendation,
           hazard.sources,
           hazard.resources,
           hazards_sorted=hazards_sorted) }}
    </div>
    {% endfor %}
    <script src="{{('%s/jquery/dist/jquery.min.js' % node_modules)|static_url}}"></script>
    <script>
      var app = {};
      app.mapUrl = '{{ 'report_overview_json'|route_url(divisioncode=division.code)}}';
      app.divisionCode = {{division.code}};
      app.divisionBounds = {{bounds}};
    </script>
    <script src="{{('%s/openlayers/dist/ol.js' % node_modules)|static_url}}"></script>
    <script src="{{'thinkhazard:static/js/report.js'|static_url}}"></script>
  </body>
</html>
