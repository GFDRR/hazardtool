{% extends "base.jinja2" %}

{% block name %}report{% endblock %}

{% block content %}

  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="{{'index'|route_url}}">
          <img src="{{('thinkhazard:static/images/logo-small.png'|static_url)}}">
        </a>
      </div>
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group form-group-lg">
          {% include 'search.jinja2' %}
        </div>
      </form>
      <div id="navbar" class="">
        <ul class="nav navbar-nav navbar-right">
          <li class="disabled">
            <a href="">About</a>
          </li>
          <li class="disabled">
            <a href="">Contact us</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div id="wrapper">
    <div id="report-wrapper" class="">
      <div id="report" role="tabpanel">
        <div id="report-header" class="text-center">
          <div class="logo-gfdrr"></div>
          <a id="pdf-link" href><img src="{{('thinkhazard:static/images/download.png'|static_url)}}">Download PDF</a>
          <h3>Report on Hazards</h3>
          <h2><a id="division-name" href="#" title="Go back to overview page">{{ division.name }}</a>&nbsp;</h2>
          <h4><a class="drillup" href="#" data-code="{{ parent_division.code }}" title="Report on hazards in {{ parent_division.name }}">{{ parent_division.name }}</a>&nbsp;</h4>
          <ul id="hazard-types-list" class="horizontal list-unstyled hazards" role="tablist">
            <li>
              <a href="#overview"></a>
            </li>
            {% for hazard in hazards %}
            <li class="{{ hazard.categorytype.mnemonic }}">
            {% if hazard.categorytype.mnemonic == 'no-data' %}
                <img src="{{(('thinkhazard:static/images/hazard-icon-%s.png' % hazard.hazardtype.title.lower().replace(' ', '-'))|static_url)}}" />
            {% else %}
              <a href="#{{ hazard.hazardtype.mnemonic }}" aria-controls="{{ hazard.hazardtype.title }}" role="tab" data-toggle="tab">
                <img src="{{(('thinkhazard:static/images/hazard-icon-%s.png' % hazard.hazardtype.title.lower().replace(' ', '-'))|static_url)}}" />
                {{ hazard.hazardtype.title }}
              </a>
            {% endif %}
            </li>
            {% endfor %}
          </ul>
        </div>
        <div id="report-body">
          <div class="scrollable tab-content">
            <div id="overview" class="tab-pane active" role="tabpanel">
            {% for hazard in hazards %}
              {% if hazard.categorytype.mnemonic == 'no-data' %}
              <h1 class="page-header level-{{ hazard.categorytype.mnemonic }}">
                {{ hazard.hazardtype.title }}
                <small class="pull-right">{{ hazard.categorytype.title }}</small>
              </h1>
              {% else %}
              <a href="#{{ hazard.hazardtype.mnemonic }}" aria-controls="{{ hazard.hazardtype.title }}" role="tab" data-toggle="tab">
                <h1 class="page-header level-{{ hazard.categorytype.mnemonic }}">
                  {{ hazard.hazardtype.title }}
                  <small class="pull-right">{{ hazard.categorytype.title }}</small>
                </h1>
              </a>
              {% endif %}
            {% endfor %}
            </div>
            {% for hazard in hazards %}
            <div id="{{ hazard.hazardtype.mnemonic }}" class="tab-pane" role="tabpanel">
              <h1 class="page-header detail level-{{ hazard.categorytype.mnemonic }}">
                {{ hazard.hazardtype.title }}
                <small class="pull-right">{{ hazard.categorytype.title }}</small>
              </h1>
              {% if hazard.description %}
              {{ hazard.description }}
              {% else %}
              {{ hazard.categorytype.description }}
              {% endif %}
              {% if hazard.recommendation_associations %}
              <h2>Recommendations</h2>
              {% for recommendation_association in hazard.recommendation_associations %}
              <p>{{ recommendation_association.recommendation.description }}</p>
              {% endfor %}
              {% endif %}
              {% if hazard.additionalinfo_associations %}
              <h2>Additional Information</h2>
              {% for additionalinfo_association in hazard.additionalinfo_associations %}
              <p><a href="{{ additionalinfo_association.additionalinformation.accessurl }}">{{ additionalinfo_association.additionalinformation.title }}</a></p>
              {% endfor %}
              {% endif %}
            </div>
            {% endfor %}
          </div>
          <div class="footer-gradient"></div>
        </div>
      </div>
    </div>
    <div id="map-wrapper" class="">
      <div id="map">
        {% if parent_division %}
        <a id="map-drillup" class="btn btn-default drillup" href="#" data-code="{{ parent_division.code }}">
          <img src="{{('thinkhazard:static/images/zoom-out.png'|static_url)}}">
          Zoom out to {{ parent_division.name }}
        </a>
        {% endif %}
        <img />
        <div id="legend" class="text-center">
          Maximum hazard level
          <ul>
            <li class="level-HIG">High</li>
            <li class="level-MED">Medium</li>
            <li class="level-LOW">Low</li>
            <li class="level-NPR">No evidence</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
{% if debug %}
    <script src="{{('%s/openlayers/dist/ol-debug.js' % node_modules)|static_url}}"></script>
{% else %}
    <script src="{{('%s/openlayers/dist/ol.js' % node_modules)|static_url}}"></script>
{% endif %}
{% endblock %}
